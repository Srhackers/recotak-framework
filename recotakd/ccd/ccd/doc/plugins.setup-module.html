<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>plugins.setup</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://recotak.curesec.com">ccd server</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="plugins-module.html">Package&nbsp;plugins</a> ::
        Module&nbsp;setup
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="plugins.setup-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module setup</h1><p class="nomargin-top"><span class="codelink"><a href="plugins.setup-pysrc.html">source&nbsp;code</a></span></p>
<p>handles the installation of a plugin into ccd context</p>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="copytree"></a><span class="summary-sig-name">copytree</span>(<span class="summary-sig-arg">src</span>,
        <span class="summary-sig-arg">dst</span>,
        <span class="summary-sig-arg">symlinks</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">ignore</span>=<span class="summary-sig-default">None</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#copytree">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="plugins.setup-module.html#setup_plugin_conf_dir" class="summary-sig-name">setup_plugin_conf_dir</a>(<span class="summary-sig-arg">ccd</span>,
        <span class="summary-sig-arg">sid</span>,
        <span class="summary-sig-arg">plg</span>)</span><br />
      Function moves the config directory to users home dir.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#setup_plugin_conf_dir">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="plugins.setup-module.html#setup_plugin_categories" class="summary-sig-name">setup_plugin_categories</a>(<span class="summary-sig-arg">ccd</span>,
        <span class="summary-sig-arg">module</span>)</span><br />
      Function looks for the plugin's requested categories.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#setup_plugin_categories">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="new_category"></a><span class="summary-sig-name">new_category</span>(<span class="summary-sig-arg">ccd</span>,
        <span class="summary-sig-arg">name</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#new_category">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="plugins.setup-module.html#setup_plugin_fd" class="summary-sig-name">setup_plugin_fd</a>(<span class="summary-sig-arg">ccd</span>,
        <span class="summary-sig-arg">sid</span>,
        <span class="summary-sig-arg">rid</span>,
        <span class="summary-sig-arg">args</span>)</span><br />
      Returns the new stdout/stdin.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#setup_plugin_fd">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="reload_plugins"></a><span class="summary-sig-name">reload_plugins</span>(<span class="summary-sig-arg">ccd</span>)</span><br />
      reloads all plugins</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#reload_plugins">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="plugins.setup-module.html#scan_plugin_directory" class="summary-sig-name">scan_plugin_directory</a>(<span class="summary-sig-arg">ccd</span>)</span><br />
      Scans the plugin dir to find the main.py of the plugin.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#scan_plugin_directory">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__import__"></a><span class="summary-sig-name">__import__</span>(<span class="summary-sig-arg">name</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#__import__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="plugins.setup-module.html#add_plugin" class="summary-sig-name">add_plugin</a>(<span class="summary-sig-arg">ccd</span>,
        <span class="summary-sig-arg">name</span>)</span><br />
      The plugin's register method is called to get some basic properties.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#add_plugin">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="plugins.setup-module.html#get_plugin_hash" class="summary-sig-name">get_plugin_hash</a>(<span class="summary-sig-arg">ccd</span>,
        <span class="summary-sig-arg">name</span>)</span><br />
      Function returns a hash.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#get_plugin_hash">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_plugin_dir"></a><span class="summary-sig-name">get_plugin_dir</span>(<span class="summary-sig-arg">ccd</span>,
        <span class="summary-sig-arg">sid</span>,
        <span class="summary-sig-arg">plg_id</span>)</span><br />
      returns the path to the plugins directory</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#get_plugin_dir">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_fd_dir"></a><span class="summary-sig-name">get_fd_dir</span>(<span class="summary-sig-arg">ccd</span>,
        <span class="summary-sig-arg">sid</span>,
        <span class="summary-sig-arg">plg_id</span>)</span><br />
      returns the path to the plugins directory</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="plugins.setup-pysrc.html#get_fd_dir">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="logger"></a><span class="summary-name">logger</span> = <code title="logging.getLogger(&quot;ccd.%s&quot; % __name__)">logging.getLogger(&quot;ccd.%s&quot; % __name__)</code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="setup_plugin_conf_dir"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">setup_plugin_conf_dir</span>(<span class="sig-arg">ccd</span>,
        <span class="sig-arg">sid</span>,
        <span class="sig-arg">plg</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="plugins.setup-pysrc.html#setup_plugin_conf_dir">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Function moves the config directory to users home dir. It returns 
  plugin's new root path.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="setup_plugin_categories"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">setup_plugin_categories</span>(<span class="sig-arg">ccd</span>,
        <span class="sig-arg">module</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="plugins.setup-pysrc.html#setup_plugin_categories">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function looks for the plugin's requested categories. If found,
it links plugin, otherwise it creates categories first.

input:
    ccd     ccd instance to operate on
    module  the module to import

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="setup_plugin_fd"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">setup_plugin_fd</span>(<span class="sig-arg">ccd</span>,
        <span class="sig-arg">sid</span>,
        <span class="sig-arg">rid</span>,
        <span class="sig-arg">args</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="plugins.setup-pysrc.html#setup_plugin_fd">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Returns the new stdout/stdin. The new fd is named after some
random bla. Further, the fd is stored in db with some additional
information like user that started the plugin and command that
issued the execution.

input:
    sid     session id
    args    arguments that were passed with OP_EXEC

output:
    fd      new fd name
    fid     database id of the fd in db

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="scan_plugin_directory"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">scan_plugin_directory</span>(<span class="sig-arg">ccd</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="plugins.setup-pysrc.html#scan_plugin_directory">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Scans the plugin dir to find the main.py of the plugin. If the file is
  found, add it to plugins array.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="add_plugin"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_plugin</span>(<span class="sig-arg">ccd</span>,
        <span class="sig-arg">name</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="plugins.setup-pysrc.html#add_plugin">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>The plugin's register method is called to get some basic properties. 
  It also sets up the plugin's ID. Afterwards, the categories are created 
  and plugin is linked.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_plugin_hash"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_plugin_hash</span>(<span class="sig-arg">ccd</span>,
        <span class="sig-arg">name</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="plugins.setup-pysrc.html#get_plugin_hash">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Function returns a hash. The hash ought to constructed over the 
  content of the plugin's main.py. If an error occurs, it hashes the 
  time.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://recotak.curesec.com">ccd server</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Fri Nov  7 12:44:38 2014
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
